from __future__ import annotations

from typing import TYPE_CHECKING

if TYPE_CHECKING:
    from denvr.session import Session

class Client:
    def __init__(self, session: Session):
        self.session = session

    {% for method in methods %}
    def {{ method.name }}(self, {%- if method.params -%}
        {%- for (name, type) in method.params.items() -%}
        {{ name }}: {{ type }} | None = None,
        {%- endfor -%}
        {%- endif -%}
        {%- if method.json -%}
        {%- for (name, type) in method.json.items() -%}
        {{ name }}: {{ type }} | None = None,
        {%- endfor -%}
        {%- endif -%}
    ):
        """{{ method.description }}"""
        kwargs = {
            {%- if method.params -%}
            'params': {
                {%- for name in method.params.keys() -%}
                '{{ name }}': {{ name }},
                {%- endfor -%}
            },
            {%- endif -%}
            {%- if method.json -%}
            'json': {
                {%- for name in method.json.keys() -%}
                '{{ name }}': {{ name }},
                {%- endfor -%}
            },
            {%- endif -%}
        }

        return self.session.request(
            '{{ method.method }}',
            '{{ method.path }}',
            **kwargs,
        )
    {% endfor %}
